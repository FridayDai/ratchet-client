var flight = require('flight');
var WithCombobox = require('./WithComplexCombobox');

function WithComplexCombobox() {

    flight.compose.mixin(this, [
        WithCombobox
    ]);

    $.widget( "ui.autocomplete", $.ui.autocomplete, {

        // The _renderItem() method is responsible for rendering each
        // menu item in the autocomplete menu.
        _renderItem: function( ul, item ) {

            // We want the rendered menu item generated by the default implementation.
            var result = this._super( ul, item );

            // If there is logo data, add our custom CSS class, and the specific
            // logo URL.
            if ( item.iconClass ) {
                result.find( "a" )
                    .addClass( "ui-menu-item-icon" )
                    .addClass(item.iconClass);
            }

            return result;

        }

    });
}

module.exports = WithComplexCombobox;
